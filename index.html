<html>

<head>
    <script src="https://unpkg.com/lightweight-charts/dist/lightweight-charts.standalone.production.js">
    </script>
    <title>
        Binance API Chat
    </title>

    <head>

        <body>
            <h2 id="price"></h2>
            <script>
                let webSocket = new WebSocket('wss://stream.binance.com:9443/ws/btcusdt@kline_1m');

                const chart = LightweightCharts.createChart(document.body, {
                    width: 400,
                    height: 300
                });
                const candlestickSeries = chart.addCandlestickSeries();

                webSocket.addEventListener('message', function(event) {
                    let data = JSON.parse(event.data)
                    let info = data.k
                    candlestickSeries.update({
                        time: info.t,
                        open: info.o,
                        high: info.h,
                        low: info.l,
                        close: info.c
                    })

                    let f = {
                        "e": "kline",
                        "E": 1640718859864,
                        "s": "BTCUSDT",
                        "k": {
                            "t": 1640718600000,
                            "T": 1640718899999,
                            "s": "BTCUSDT",
                            "i": "5m",
                            "f": 1204409609,
                            "L": 1204415363,
                            "o": "47334.52000000",
                            "c": "47450.01000000",
                            "h": "47558.85000000",
                            "l": "47313.01000000",
                            "v": "158.80144000",
                            "n": 5755,
                            "x": false,
                            "q": "7536683.59927590",
                            "V": "84.83712000",
                            "Q": "4026626.18788410",
                            "B": "0"
                        }
                    }
                });
            </script>
        </body>

</html>